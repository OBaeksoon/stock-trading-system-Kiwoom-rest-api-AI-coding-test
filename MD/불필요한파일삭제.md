## 우분투 서버에서 불필요한 파일 검사 및 삭제 방법

우분투 서버에서 불필요한 파일을 검사하고 삭제하는 것은 시스템 성능 유지에 중요하지만, **매우 신중하게 접근해야 합니다.** 잘못된 파일 삭제는 시스템 오류로 이어질 수 있으므로, **반드시 백업을 먼저 수행하고, 삭제 전에는 항상 내용을 확인하세요.**

---

### **1. 오래된 로그 파일 정리**

로그 파일은 시간이 지남에 따라 용량을 많이 차지할 수 있습니다. 대부분의 시스템은 `logrotate`를 통해 자동으로 로그를 관리하지만, 수동으로 확인할 수도 있습니다.

*   **오래된 로그 파일 찾기 (예: 30일 이상 된 .log 파일):**
    ```bash
    sudo find /var/log -type f -name "*.log" -mtime +30
    ```
    (이 명령은 파일을 나열만 합니다. 삭제하지 않습니다.)

*   **오래된 로그 파일 삭제 (매우 주의!):**
    위에서 찾은 파일들을 검토한 후, 삭제하려면 다음 명령어를 사용합니다.
    ```bash
    sudo find /var/log -type f -name "*.log" -mtime +30 -delete
    ```
    **경고:** 이 명령은 즉시 파일을 삭제하므로, 어떤 파일이 삭제될지 정확히 알고 있을 때만 사용하세요.

*   **Systemd Journal 로그 정리:**
    ```bash
    sudo journalctl --vacuum-size=500M  # 로그 크기를 500MB로 제한
    sudo journalctl --vacuum-time=1y    # 1년 이상 된 로그 삭제
    ```

### **2. 임시 파일 정리**

`/tmp`와 `/var/tmp` 디렉토리는 임시 파일을 저장하는 곳입니다. 이 파일들은 보통 시스템 재부팅 시 자동으로 삭제되지만, 그렇지 않은 경우도 있습니다.

*   **오래된 임시 파일 찾기 (예: 7일 이상 접근되지 않은 파일):**
    ```bash
    sudo find /tmp -type f -atime +7
    sudo find /var/tmp -type f -atime +7
    ```

*   **오래된 임시 파일 삭제 (매우 주의!):**
    ```bash
    sudo find /tmp -type f -atime +7 -delete
    sudo find /var/tmp -type f -atime +7 -delete
    ```

### **3. 사용되지 않는 패키지 및 캐시 정리**

Ubuntu의 APT 패키지 관리자는 불필요한 패키지와 다운로드된 패키지 파일을 정리하는 기능을 제공합니다.

*   **더 이상 필요 없는 종속성 패키지 제거:**
    ```bash
    sudo apt autoremove
    ```

*   **다운로드된 패키지 아카이브(deb 파일) 캐시 삭제:**
    ```bash
    sudo apt clean
    ```
    (이것은 `/var/cache/apt/archives` 디렉토리의 모든 `.deb` 파일을 삭제합니다.)

*   **더 이상 다운로드할 수 없는 패키지 아카이브만 삭제:**
    ```bash
    sudo apt autoclean
    ```

### **4. 크고 오래된 파일 또는 디렉토리 찾기**

특정 디렉토리에서 크기가 큰 파일이나 오래된 파일을 찾아 수동으로 검토할 수 있습니다.

*   **가장 큰 디렉토리 찾기 (루트 디렉토리에서 시작):**
    ```bash
    sudo du -sh /* | sort -rh | head -n 10
    ```
    (이 명령으로 큰 디렉토리를 찾은 후, 해당 디렉토리로 이동하여 다시 `du -sh *`를 실행하며 드릴다운할 수 있습니다.)

*   **특정 경로에서 1GB보다 큰 파일 찾기 (예: `/home` 디렉토리):**
    ```bash
    sudo find /home -type f -size +1G -print0 | xargs -0 du -h | sort -rh
    ```
    (이 명령은 파일을 나열만 합니다.)

### **5. 중복 파일 찾기 (고급)**

중복 파일은 디스크 공간을 낭비할 수 있습니다. `fdupes`나 `rmlint`와 같은 도구를 사용하여 찾을 수 있지만, 설치가 필요하며 사용에 더 많은 주의가 필요합니다.

*   **`fdupes` 설치 및 사용 예시:**
    ```bash
    sudo apt install fdupes
    fdupes -r /path/to/search # 중복 파일 나열
    fdupes -d -r /path/to/search # 중복 파일 삭제 (매우 주의!)
    ```

---

**다시 한번 강조하지만, 파일을 삭제하기 전에는 항상 해당 파일이 시스템 작동에 필수적인지 확인하고, 중요한 데이터는 반드시 백업하세요.**