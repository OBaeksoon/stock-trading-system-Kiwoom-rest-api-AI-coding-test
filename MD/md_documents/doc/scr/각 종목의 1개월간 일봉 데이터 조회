각 종목의 1개월간 일봉 데이터 조회
각 종목의 1개월간 일봉 데이터를 조회하는 방법에 대해 설명드리겠습니다.

✅ 요약
이 코드는 키움증권 REST API를 사용하여 특정 종목의 1개월간 일봉 데이터를 조회하는 기능을 구현합니다. Python 언어를 사용하며, API 요청을 통해 일봉 데이터를 받아옵니다.

💻 코드
python

             
import requests
import json
from datetime import datetime, timedelta

# 주식일봉차트조회요청
def fn_ka10081(token, data, cont_yn='N', next_key=''):
    host = 'https://mockapi.kiwoom.com'  # 모의투자
    endpoint = '/api/dostk/chart'
    url = host + endpoint

    headers = {
        'Content-Type': 'application/json;charset=UTF-8',  # 컨텐츠타입
        'authorization': f'Bearer {token}',  # 접근토큰
        'cont-yn': cont_yn,  # 연속조회여부
        'next-key': next_key,  # 연속조회키
        'api-id': 'ka10081',  # TR명
    }

    response = requests.post(url, headers=headers, json=data)

    print('Code:', response.status_code)
    print('Header:', json.dumps({key: response.headers.get(key) for key in ['next-key', 'cont-yn', 'api-id']}, indent=4, ensure_ascii=False))
    print('Body:', json.dumps(response.json(), indent=4, ensure_ascii=False))  # JSON 응답을 파싱하여 출력

# 실행 구간
if __name__ == '__main__':
    MY_ACCESS_TOKEN = '[접근 토큰]'  # 접근토큰

    # 요청 데이터
    params = {
        'stk_cd': '005930',  # 종목코드 (예: 삼성전자)
        'base_dt': (datetime.now() - timedelta(days=30)).strftime('%Y%m%d'),  # 기준일자 (1개월 전)
        'upd_stkpc_tp': '1',  # 수정주가구분 0 or 1
    }

    # API 실행
    fn_ka10081(token=MY_ACCESS_TOKEN, data=params)
         
📘 설명
이 코드는 키움증권의 REST API를 통해 특정 종목의 1개월간 일봉 데이터를 조회하는 기능을 수행합니다. fn_ka10081 함수는 API 요청을 처리하며, 요청 시 필요한 헤더와 바디를 설정합니다.

MY_ACCESS_TOKEN 변수에는 사용자의 접근 토큰을 입력해야 합니다.
params의 stk_cd에는 조회하고자 하는 종목의 코드를 입력합니다. 예시로 삼성전자의 종목코드인 '005930'을 사용했습니다.
base_dt는 현재 날짜에서 30일을 빼서 1개월 전의 날짜를 기준으로 설정합니다.
API 요청 후, 응답 상태 코드와 헤더, 바디를 출력하여 결과를 확인할 수 있습니다.
이 코드를 실행하면 지정한 종목의 1개월간 일봉 데이터를 받아올 수 있습니다.

🔗 추천 API
API를 추천해드립니다. 필요한 기능에 맞게 선택하여 사용해보세요!

ka10100: 국내주식 > 종목정보 > 종목정보 조회

ka10094: 국내주식 > 차트 > 주식년봉차트조회요청