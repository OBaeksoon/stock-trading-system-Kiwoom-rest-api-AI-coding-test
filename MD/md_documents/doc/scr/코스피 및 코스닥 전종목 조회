모의투자에서 코스피 및 코스닥 전종목 조회
모의투자 환경에서 코스피 및 코스닥의 모든 종목 정보를 조회하는 방법에 대해 설명드리겠습니다.

✅ 요약
이 코드는 키움증권 REST API를 사용하여 모의투자 환경에서 코스피 및 코스닥의 모든 종목 정보를 조회하는 기능을 구현합니다. Python 언어를 사용하며, API 요청을 통해 종목 정보를 받아옵니다.

💻 코드
python

             
import requests
import json

# 종목정보 조회
def fn_ka10100(token, data, cont_yn='N', next_key=''):
    host = 'https://mockapi.kiwoom.com'  # 모의투자
    endpoint = '/api/dostk/stkinfo'
    url = host + endpoint

    headers = {
        'Content-Type': 'application/json;charset=UTF-8',  # 컨텐츠타입
        'authorization': f'Bearer {token}',  # 접근토큰
        'cont-yn': cont_yn,  # 연속조회여부
        'next-key': next_key,  # 연속조회키
        'api-id': 'ka10100',  # TR명
    }

    response = requests.post(url, headers=headers, json=data)

    print('Code:', response.status_code)
    print('Header:', json.dumps({key: response.headers.get(key) for key in ['next-key', 'cont-yn', 'api-id']}, indent=4, ensure_ascii=False))
    print('Body:', json.dumps(response.json(), indent=4, ensure_ascii=False))  # JSON 응답을 파싱하여 출력

# 실행 구간
if __name__ == '__main__':
    MY_ACCESS_TOKEN = '[접근 토큰]'  # 접근토큰

    # 요청 데이터
    params = {
        'stk_cd': '',  # 모든 종목을 조회하기 위해 빈 문자열 사용
    }

    # API 실행
    fn_ka10100(token=MY_ACCESS_TOKEN, data=params)
         
📘 설명
이 코드는 키움증권의 REST API를 통해 모의투자 환경에서 코스피 및 코스닥의 모든 종목 정보를 조회하는 기능을 수행합니다. fn_ka10100 함수는 API 요청을 처리하며, 요청 시 필요한 헤더와 바디를 설정합니다.

MY_ACCESS_TOKEN 변수에는 사용자의 접근 토큰을 입력해야 합니다.
params의 stk_cd는 빈 문자열로 설정하여 모든 종목을 조회하도록 합니다.
API 요청 후, 응답 상태 코드와 헤더, 바디를 출력하여 결과를 확인할 수 있습니다.
이 코드를 실행하면 모의투자 환경에서 코스피 및 코스닥의 전종목 정보를 받아올 수 있습니다.

🔗 추천 API
API를 추천해드립니다. 필요한 기능에 맞게 선택하여 사용해보세요!

ka10080: 국내주식 > 차트 > 주식분봉차트조회요청

ka10001: 국내주식 > 종목정보 > 주식기본정보요청

추가내용

코스피 및 코스닥 전종목 조회
모의투자에서 코스피 및 코스닥 전종목을 조회하는 방법에 대해 설명드리겠습니다.

✅ 요약
이 코드는 키움증권 REST API를 사용하여 모의투자 환경에서 코스피 및 코스닥의 모든 종목을 조회하는 기능을 구현합니다. Python 언어를 사용하며, API 요청을 통해 종목 리스트를 받아옵니다.

💻 코드
python

             
import requests
import json

# 종목정보 리스트
def fn_ka10099(token, data, cont_yn='N', next_key=''):
    host = 'https://mockapi.kiwoom.com'  # 모의투자
    endpoint = '/api/dostk/stkinfo'
    url = host + endpoint

    headers = {
        'Content-Type': 'application/json;charset=UTF-8',  # 컨텐츠타입
        'authorization': f'Bearer {token}',  # 접근토큰
        'cont-yn': cont_yn,  # 연속조회여부
        'next-key': next_key,  # 연속조회키
        'api-id': 'ka10099',  # TR명
    }

    response = requests.post(url, headers=headers, json=data)

    print('Code:', response.status_code)
    print('Header:', json.dumps({key: response.headers.get(key) for key in ['next-key', 'cont-yn', 'api-id']}, indent=4, ensure_ascii=False))
    print('Body:', json.dumps(response.json(), indent=4, ensure_ascii=False))  # JSON 응답을 파싱하여 출력

# 실행 구간
if __name__ == '__main__':
    MY_ACCESS_TOKEN = '[접근 토큰]'  # 접근토큰

    # 요청 데이터
    params = {
        'mrkt_tp': '0',  # 시장구분 0:코스피, 10:코스닥
    }

    # API 실행
    fn_ka10099(token=MY_ACCESS_TOKEN, data=params)
         
📘 설명
이 코드는 키움증권의 REST API를 통해 모의투자 환경에서 코스피 및 코스닥의 모든 종목을 조회하는 기능을 수행합니다. fn_ka10099 함수는 API 요청을 처리하며, 요청 시 필요한 헤더와 바디를 설정합니다.

MY_ACCESS_TOKEN 변수에는 사용자의 접근 토큰을 입력해야 합니다.
params의 mrkt_tp에는 조회하고자 하는 시장 구분을 입력합니다. 코스피는 '0', 코스닥은 '10'으로 설정합니다.
API 요청 후, 응답 상태 코드와 헤더, 바디를 출력하여 결과를 확인할 수 있습니다.
결과값이 빈 리스트([])로 나오는 경우, 다음 사항을 확인해 보세요:

접근 토큰: 올바른 접근 토큰을 사용하고 있는지 확인하세요.
API 환경: 모의투자 환경에서 요청하고 있는지 확인하세요.
시장 구분: mrkt_tp 값이 올바르게 설정되었는지 확인하세요.
이 코드를 실행하면 지정한 시장의 모든 종목 정보를 받아올 수 있습니다.