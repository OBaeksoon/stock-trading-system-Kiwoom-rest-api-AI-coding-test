
# 상위 30위 종목 테마 및 뉴스 검색 기능

## 1. 개요

이 기능은 키움증권 API를 통해 조회된 **상승률 상위 30개 종목**에 대해, 각 종목과 관련된 최신 **테마**와 **뉴스**를 자동으로 수집하고 웹 페이지에 표시합니다. 사용자는 이 페이지를 통해 현재 시장에서 가장 주목받는 종목들의 동향을 빠르게 파악할 수 있습니다.

## 2. 주요 구성 요소

### 2.1. Python 스크립트: `python_modules/get_top_30_themes_news.py`

- **역할**: 데이터 수집 및 분석
- **주요 기능**:
    1.  `top_30_rising_stocks` 테이블에서 상위 30위 종목 목록을 조회합니다.
    2.  각 종목의 이름을 키워드로 네이버 뉴스 API를 호출하여 최신 뉴스를 검색합니다.
    3.  수집된 뉴스를 `stock_news` 데이터베이스 테이블에 저장합니다.
    4.  저장된 뉴스의 제목과 본문을 분석하여 사전에 정의된 키워드(`BASIC_THEMES_KEYWORDS`)를 기반으로 테마를 분류하고, `stock_news` 테이블의 `theme` 컬럼을 업데이트합니다.
- **실행 방법**:
    ```bash
    # 1. 먼저 상위 30위 종목 리스트를 최신화해야 합니다.
    python3 /home/stock/public_html/python_modules/get_top_30_rising_stocks.py

    # 2. 그 다음, 해당 종목들의 뉴스와 테마를 수집합니다.
    python3 /home/stock/public_html/python_modules/get_top_30_themes_news.py
    ```

### 2.2. PHP 웹 페이지: `display_top_30_themes_news.php`

- **역할**: 데이터 시각화
- **주요 기능**:
    1.  데이터베이스에 저장된 상위 30위 종목의 정보(순위, 종목명, 현재가, 등락률)와 각 종목에 연결된 최신 뉴스 및 테마를 함께 조회합니다.
    2.  조회된 데이터를 하나의 테이블에 정리하여 보여줍니다.
    3.  사용자가 종목명, 테마, 뉴스 제목 등 원하는 키워드로 편리하게 필터링할 수 있는 검색 기능을 제공합니다.
- **접속 방법**:
    - 웹 브라우저에서 다음 URL로 접속합니다.
    - `http://<서버 주소>/display_top_30_themes_news.php`

## 3. 데이터베이스 테이블

- **`top_30_rising_stocks`**: 상승률 상위 30개 종목의 순위, 종목코드, 이름, 가격 등의 정보를 저장합니다. (`get_top_30_rising_stocks.py` 실행 시 업데이트)
- **`stock_news`**: 수집된 뉴스의 제목, 링크, 내용, 게시일, 종목코드, 분류된 테마를 저장합니다. (`get_top_30_themes_news.py` 실행 시 업데이트)

## 4. 사용 시나리오

1.  **장 시작 전/후 데이터 준비**:
    - 터미널 또는 스케줄러(cron)를 통해 `get_top_30_rising_stocks.py`를 실행하여 당일의 관심 종목 리스트를 확보합니다.
    - 이어서 `get_top_30_themes_news.py`를 실행하여 해당 종목들의 최신 동향(뉴스 및 테마)을 데이터베이스에 채웁니다.

2.  **웹 페이지에서 동향 파악**:
    - `display_top_30_themes_news.php` 페이지에 접속하여 상승률이 높은 종목들이 어떤 테마와 뉴스로 주목받고 있는지 한눈에 확인합니다.
    - 특정 테마(예: "반도체")나 키워드로 검색하여 관련 종목들을 빠르게 필터링하고 투자 판단에 참고합니다.
